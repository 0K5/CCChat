% vim:ft=tex:
%
\documentclass[10pt,a4paper,landscape]{article}
\usepackage[utf8]{inputenc}
\usepackage[german]{babel}
\usepackage[T1]{fontenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{makeidx}
\usepackage{graphicx}
\usepackage{lmodern}
\usepackage{kpfonts}
\usepackage{tabularx}
\usepackage{multirow}
\usepackage{xcolor}
\usepackage{booktabs}
\usepackage{hyperref}
\hypersetup{
    colorlinks = true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=cyan,
}
\usepackage{listings}
\usepackage{color}

\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}

\lstset{frame=tb,
    language=Java,
    aboveskip=3mm,
    belowskip=3mm,
    showstringspaces=false,
    columns=flexible,
    basicstyle={\small\ttfamily},
    numbers=none,
    numberstyle=\tiny\color{gray},
    keywordstyle=\color{blue},
    commentstyle=\color{dkgreen},
    stringstyle=\color{mauve},
    breaklines=true,
    breakatwhitespace=true,
    tabsize=3
}

\usepackage[left=2cm,right=2cm,top=2cm,bottom=2cm]{geometry}

\title{CCChat Documentation}
\date{\today}
\author{Leonid Immel and Oliver Schneider}

\begin{document}
\maketitle
\tableofcontents

\section{Node Modules (Serverside)}
\begin{tabularx}{\textwidth}{ll}
    \textbf{Module} & \textbf{Benefit}               \\
    \toprule
    express         & Web application framework that includes several useful features for web applications. \\ 
    \midrule
    passport        & Authentication middleware for session management. \\
    \midrule
    socket.io       & Realtime event-based bidirectional communication. \\
    \midrule
    winston         & Logger. \\
    \midrule
    body-parser     & Handles http post requests. Extracts body of http to req.body. \\
    \midrule
    serve-favicon   & Handles the requests from browsers for the favicon and caches the favicon. \\
    \midrule
    handlebars      & Builds semantic templates \\
    \midrule
    mongoose        & For MongoDB modeling \\
    \midrule
    mocha           & Testframework \\
    \bottomrule
\end{tabularx}

\section{Vendor Libraries (Clientside)}
\begin{tabularx}{\textwidth}{ll}
    \textbf{Library}& \textbf{Benefit}       \\
    \toprule
    bootstrap       & Responsive website programming for mobile-first implementation.\\
    \midrule
    jQuery          & Easier handling of javascript \\
    \bottomrule
\end{tabularx}
    
\section{Project Structure}
\begin{itemize}
        \renewcommand{\labelitemi}{$--$}
        \renewcommand{\labelitemii}{$--$}
        \renewcommand{\labelitemiii}{$--$}
        \renewcommand{\labelitemiv}{$--$}
        \item
            app\\
            \begin{itemize}
                    \item
                        public (all static served files)\\
                        \begin{itemize}
                                \item
                                    js\\
                                \item 
                                    css\\
                                \item 
                                    html\\
                                \item
                                    libs\\
                        \end{itemize}
                    \item
                        views (handlebar views)\\
                    \item
                        models (handles data, logic and storage of the app)\\
                    \item
                        controllers (defines the routes within the app)\\
                    \item
                        middleware (processes incoming requests before they are passed to the routes (loginauthentication))\\
                    \item
                        helpers (functionality and code shared in the whole app (regex- or renderoperations))\\
                    \item
                        tests (all tests for the application)\\
            \end{itemize}
\end{itemize}
\renewcommand{\labelitemi}{$\bullet$}
\renewcommand{\labelitemii}{$\cdot$}
\renewcommand{\labelitemiii}{$\diamond$}
\renewcommand{\labelitemiv}{$\ast$}

\section{Documentation}
\begin{description}
        \item[modules]
            The functionality of modules is described within a comment on top of the js-file.\\
        \item[functions]
            Functions with complex implementations or unclear names (should never happen!) need a commentation\\
            Simpler functions are not commented to produce more readable code\\
        \item[variables]
            Variables require clear and good naming, never comment a variable unless absolutely necessary.\\ 
            You should think a littel longer and find a better name.\\
\end{description}
\section{Formatting}
We use the Eclipse JS Formatter standart for our code.\\
\section{SSL}
\subsection{Create certificate}
\begin{lstlisting}
openssl genrsa -out client-key.pem 2048
openssl req -new -key client-key.pem -out client.csr
openssl x509 -req -in client.csr -signkey client-key.pem -out client-cert.pem
\end{lstlisting}
\subsection{Allow Certificate in browser for Dev}
\subsubsection{Chromium / Chrome 64}
Option 1:\\
\begin{enumerate}
        \item
                Go to Settings. Hit the „Advanced“ button on bottom of the page
        \item
                Click the „Manage certificates“ button in the „Privacy and security“ Tab
        \item
                Click the „Authorities“ Tab
        \item
                Click on „Import“
        \item
                Navigate to the cert file within your app source code folder.
        \item
                Click open and allow what you want to allow
\end{enumerate}
Option 2:\\
\begin{enumerate}
        \item
                Open the side explitetly with the url „https://localhost:3000“
        \item
                Click the advanced Button
        \item
                Allow the certificate
        \item 
                Continue with Finish (see a little further down)
        \item
                follow option 2 until point 3.
        \item
                find your certificate in the list of authorities. 
        \item
                click expand on the certificate 
        \item 
                click the 3 dots that appear under the certificate
        \item 
                click „edit“
        \item 
                allow what you want to allow
\end{enumerate}
\subsubsection{Firefox 59}
\begin{enumerate}
        \item
                Open the side explitetly with the url „https://localhost:3000“
        \item
                Click the „Advanced“ Button
        \item 
                Click „Add Exception“
        \item
                Click „Confirm Security Exception“
\end{enumerate}
\section{Logger}
\section{Error Handling}
\section{Useful websites}
\begin{itemize}
        \item
            \href{https://socket.io/get-started/chat/}{Simple chat with socket.io}
        \item
            \href{www.handlebars.com}{Handlebars}
        \item 
            \href{https://www.packtpub.com/books/content/getting-started-react-and-bootstrap}{Combine Bootstrap and ReactJS}
        \item
            \href{http://mongoosejs.com/docs/guide.html}{Mongoose}
        \item
            \href{https://github.com/phutchins/pipo}{Example of secure chat in production}
        \item
            \href{https://support.securly.com/hc/en-us/articles/206081828-How-to-manually-install-the-Securly-SSL-certificate-in-Chrome}{Add a SSL-Cert in Chrome}
\end{itemize}

\end{document}
